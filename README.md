# Replacer
Tool for removing an object background and replacing it with neutral generated one.

## Installation
```bash
git clone https://github.com/Tialo/replacer
cd replacer
pip install -r requirements.txt
```

## Usage

### To serve
```bash
python app.py
```

### CLI
```bash
python -m replacer input.png output.png
```

## How does it work?
* Background is removed with [rembg](https://github.com/danielgatis/rembg)
* New background is generated by Stable Diffusion model
* Object is pasted into new background

## Background generation comparison
For a comparison of different background generation models, see [this](data/comparison.md) table.


## Example
<div style="display: flex; justify-content: space-between;">
    <img src="data/pan.png" alt="pan" style="width: 50%;" />
    <img src="data/pan_output.png" alt="pan_out" style="width: 50%;" />
</div>


## File organization
```
.
├── replacer
│   ├── __init__.py
│   ├── __main__.py              - CLI functionality
│   ├── app.py                   - Gradio application
│   ├── processing
│   │   ├── __init__.py
│   │   ├── adjust_image.py      - Tools for adjusting image propertiers
│   │   ├── normalization.py     - Different methods of color normalization
│   │   └── remove_background.py - Background removal functionality
│   ├── prompts.py               - List of item categories and corresponding prompts
│   └── replacer.py              - Main module for background replacement
└── requirements.txt
```